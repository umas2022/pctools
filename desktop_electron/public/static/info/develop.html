<h1>develop开发记录</h1>
<h3>备忘/待办/bug/下次一定/总之写在最前面</h3>
<ul>
<li>记得没事看下future</li>
<li>通过前端手动结束或者暂停程序,想办法结束没有启用终端模式的程序</li>
<li>增加选项：是否要先计数</li>
<li>增加选项：是否要预计剩余时间（用数量简单预测/用文件大小精确预测）</li>
<li>使用os.path.normpath()替代replace("\", "/")注意空字符串会被替换为'.'</li>
<li>没填输出路径时直接使用输入路径</li>
<li>关于输入参数检查:加一个utils,顺便把每次的输入写进intf.json里,保存上次的输入结果;输入参数分成必填和有默认值两种,给所有的必填项目加上星号</li>
<li>后端发回的消息增加一个id来区分多个前端窗口</li>
<li>
<p>重命名遍历增加选项:一级目录/遍历所有</p>
</li>
<li>
<p>所有的log_path都少了一句logger.raw_logger.set_path(self.path_log),这里参考remove_keyword的写法,注意如果为空,normpath函数会转换为'.',还要再加一个判断</p>
</li>
</ul>
<h3>2023.3.28</h3>
<ul>
<li>整理了一下硬盘,项目换到s-code文件夹下面了</li>
<li>新增搜索所有后缀名功能</li>
<li>删除关键字功能新增了两个关键字的位置匹配</li>
<li>后缀名搜索增加了后缀的计数</li>
<li>删除关键字不需要计数</li>
<li>前端设置页开发模式switch没有生效,虽然显示是开发模式但实际路径没有修改,需要手动开关一下才能正确切换到开发路径 -&gt; 修好了,在switch里加了一个onMounted</li>
<li>截图翻译从demo整合到了工具箱里,参考了之前的shotHelper项目</li>
</ul>
<h3>2023.3.18</h3>
<ul>
<li>增加了简单的ocr demo和翻译demo,ocr效果一般,只能对非常规整的图片进行识别,demo中的test_jp2.jpg尾部带注音的汉字没有识别出来</li>
</ul>
<h3>2023.3.17</h3>
<ul>
<li>增加了宝可梦wiki的一个简单爬虫,宝可梦搜索页的大致雏形</li>
<li>txt转html的三个小文件拷到demo里了,以后所有项目都在这里统一保管</li>
</ul>
<h3>2023.3.15</h3>
<ul>
<li>增加desktop_pyqt,入门qt,加了一个demo,打包的路径问题解决了,图标icon也ok</li>
</ul>
<h3>2023.3.12</h3>
<ul>
<li>设置页开发模式路径switch从默认false改成用utils中的is_dev()读取当前状态</li>
<li>7z打包前的计数没有筛选关键字,加上了;顺便修改了双层压缩的logger文本;还有打包时的计数也没加筛选</li>
<li>由于user-select不能重复设置,全局禁止选中改成了每个文件单独设置,现在log文本可以被选中并复制了,interface.vue中使用div:not(.log-box)来选中其他元素没有成功,还是给每个标签手动写了</li>
</ul>
<h3>2023.3.1</h3>
<ul>
<li>截图增加了以个打开文件夹的按钮之后开始报warning了,是pyqt的问题,没有找到很好的库来替代它,用pyqt6替代pyqt5之后报错信息更清楚了,是因为QApplication已经存在不能重复定义;把QApplication的定义加到init里了,单次调用的时候只实例化一次就没问题,但是前端再发一次请求的话还是会warning,搞不定了</li>
<li>后端新增了返回输入参数到前端,发现logbox逻辑有点问题,不能接收纯字符串输入,必须要有方括号,改了</li>
<li>主页右上角按钮单独写成组件了</li>
<li>后端增加了sp_auto_cmd,使用os.system直接执行输入的代码</li>
<li>前端右上角添加一个新按钮:启动新前端</li>
<li>前端启动时不再自动启动后端了,不然每次添加新窗口时都会开出一个新后端</li>
<li>双开窗口时第二个窗口获取不到列表,第二窗口的路径定位在了python脚本的位置,因为是通过python启动的,改了获取路径的全局函数,增加了一个判断项</li>
</ul>
<h3>2023.2.25</h3>
<ul>
<li>新增了python静态检测,使用winsdk在结束时发送windows通知</li>
<li>新增了窗口截图,附带一个获取所有窗口句柄的按钮</li>
<li>后端增加了sp_demo,整合了目前支持的4种接口,放在预设分类里了</li>
</ul>
<h3>2023.2.21</h3>
<ul>
<li>退回win10,重装python,发现setup里面漏写了几个包,加上了</li>
<li>退回win10重装python之后后端跑不动了,重建项目发现需要添加daphne,可能是django版本升级了,整理了一份hello_django.md作为经验记录,也有可能是之前装了daphne但是没记录</li>
<li>后端统一了外部脚本的引用路径,定位到backend_v2/py_script</li>
<li>打包7z把两个方法合并,增加了select;新增了筛选关键字功能</li>
<li>打包7z增加了双层压缩功能,双层压缩的内层加密好像没有生效</li>
<li>批量重命名文件夹报错系统找不到路径,错误定位在Traverse的遍历,实际上重命名已经正确完成了;解决:问题在于,traverse使用的yield在返回上层文件夹后,上层文件夹文件名被修改了,继续yield下层文件夹当然会找不到,改成只遍历第一层了</li>
</ul>
<h3>2023.2.17</h3>
<ul>
<li>完全备份增加关键字筛选</li>
<li>增加了向wsa拷贝文件的功能,调用了本地的adb.exe;从wsa里往外拷后面有时间再</li>
<li>前端一键启动后端的按钮没有区分开发环境和生产环境,改了</li>
<li>观测到两遍重复log,有哪里重复定义了</li>
<li>win11前端截不到后端的log了</li>
<li>↑非常奇怪,排查之后应该没有logger重复定义;win11截不到后端log原因是在server里将logger从terminal改为frontend不能在主函数中生效,把logger初始设为frontend暂时可以向前端发送了,此时重复输出的问题也莫名其妙解决了</li>
<li>adb的复制其实可以自动创建父文件夹,不需要手动创建文件结构,adb shell mkdir命令创建文件夹时括号会报错,空格也报错,非常恶心</li>
<li>utils_tools增加了string_tools.py,目前仅添加了一个字符串搜索关键字位置的函数,copy_backup/copy_wsa增加了对关键字位置的筛选功能</li>
</ul>
<h3>2023.2.11</h3>
<ul>
<li>更新了win11发现一键安装python环境逻辑是错的,后端运行起来之后所有module已经被import过了,此时如果没有安装直接就会报错,后端根本跑不起来 -&gt; 重新排查了一遍,按理说后端跑起来的时候跟script没有关系;发现是后端的废弃代码没有删干净,manager.py相关代码删掉就好了</li>
<li>tmd win11乱搞老子环境变量,python又tmd要重新配一遍</li>
</ul>
<h3>2023.1.31</h3>
<ul>
<li>图片压缩支持同文件夹操作</li>
<li>图片压缩的循环好像没有触发,都只压了一次就过去了 -&gt; 修好了,return写在while里面了所以没进循环</li>
<li>7zip并行压缩设置的最大并行数没有生效,刚开始跑3个终端,后面刷刷全起来了,凭感觉修改了一下,不知道好不好用 -&gt; 好用</li>
</ul>
<h3>2023.1.29</h3>
<ul>
<li>设置页增加了python环境初始化的按钮</li>
<li>random背景图片</li>
<li>全局info弹窗组件DialogPopup的fixed属性没有生效,没找到原因</li>
<li>7zip压缩程序添加多线程支持</li>
<li>增加了新的7zip打包方法,python调用windows安装的7z.exe,比py7zr更快,而且可以显示进度条</li>
<li>多线程改为每完结一个线程就即时添加一个新的,而不是等一组全部运行完再直接加一组</li>
<li>7z压缩增加了switch:是否覆写</li>
</ul>
<h3>2023.1.27</h3>
<ul>
<li>补充设置页文本,并格式化,左对齐,第二行缩进</li>
<li>首页右上角增加了切换背景图片的按钮,可以切换背景图片</li>
<li>主页右上角四个按钮的格式重新写了,仔细研究了一下flex布局,终于搞懂了</li>
<li>四个按钮外加一层div,当滚动条往下滚的时候隐藏按钮,这样按钮不会挡住下面的选项</li>
<li>主页的背景颜色搞不定了,始终没法100%占满剩余空间,写了个450px的block占位</li>
</ul>
<h3>2023.1.26</h3>
<ul>
<li>前端设置页增加了[开发/生产]路径切换,分别对应打包前后的python目录,调试时候更方便</li>
<li>功能增加了批量打包为7zip,分类在压缩里</li>
</ul>
<h3>2023.1.4</h3>
<ul>
<li>给django和script整合了一个setup.py,并且一起打包进了electron,现在electron的包可以直接拷贝给别人用了</li>
<li>前端新增了utils_path.js,提供一个返回当前public/static相对路径的方法,可以区分开发环境和生产环境,前端对路径的调用现在全部统一</li>
<li>调试用的快速启动py重新写了一下,原版放在desktop_electron整合文件夹里了,外面留下3个快捷入口:启动前端,启动后端,打包前端</li>
<li>使用zero-md显示开发日志md文件,发现根本不好用,tm的垃圾包还放到网上</li>
<li>改用python在run脚本里将md转化为html,设置页里现在可以看到日志了</li>
<li>给script增加了分组,前端在功能选择框之前增加了组选择框</li>
</ul>
<h3>2023.1.3</h3>
<ul>
<li>帮老张写了两个爬虫,米思米的那个反爬有点厉害,没能成功,微信图片用opencv的降噪函数效果非常好</li>
</ul>
<h3>2023.1.2</h3>
<ul>
<li>启动前端时直接拉起后端,重试10次获取list</li>
</ul>
<h3>2023.1.1</h3>
<ul>
<li>微调了前端interface的文字宽度,爬虫页参数的title太长了会换行</li>
<li>bookwalker的爬虫整合进script了,接进了前端页面</li>
<li>前端的interface增加了button选项,现在可以通过在intf.json中添加button调用主类里的子函数了,button和执行程序调用的是同一个websocket函数,所有页面内的参数都会被传递,所以不需要为button单独设计输入参数框</li>
</ul>
<h3>2022.12.31</h3>
<ul>
<li>前端增加了animate组件box,给右上角三个按钮套上了</li>
<li>获取list的部分在成功获取后直接隐藏,右上角增加了extract展开按钮</li>
<li>使用快捷预设进行samu全压缩时首先的对比删除可能没有正确运行 -&gt; 修好了,在使用json_set输入时没有对路径进行//和\的转换</li>
<li>samu全备份最后增加了一步全部备份,目标是直接拷贝前面error跳过的文件</li>
<li>time.time()替代了time.process_time(),现在后端计算的时间是准确的了</li>
</ul>
<h3>2022.12.29</h3>
<ul>
<li>修复了试错模式删除不计数</li>
</ul>
<h3>2022.12.14</h3>
<ul>
<li>haku4爬虫增加了删除图片信息,改用jpg体积小了很多</li>
<li>haku4增加了时间花费显示,time.time显示的是程序时间,之前用的time.process_time是cpu占用的时间,等待时间不被计算在内</li>
</ul>
<h3>2022.12.5</h3>
<ul>
<li>bash脚本拷了一些过来</li>
<li>漫画爬虫文件夹改名为demo,加了几个文件</li>
<li>漫画爬虫发现有页面重复截图了,是因为点击翻页没有正确触发,增加了判断</li>
</ul>
<h3>2022.12.4</h3>
<ul>
<li>小不点的爬虫优化了一下,增加了同步的锐化</li>
</ul>
<h3>2022.12.3</h3>
<ul>
<li>删除关键字，试错，统计数据是0 -&gt; 错误没能复现，不修了</li>
<li>把之前的测试页搬过来了</li>
<li>首页右上角增加一键启动后端图标</li>
</ul>
<h3>2022.11.21</h3>
<ul>
<li>增加功能：序号命名</li>
</ul>
<h3>2022.11.8</h3>
<ul>
<li>增加了对比删除和copy预设动作集</li>
<li>logbox的拖动条位置改到-10了，不会和横向滚动条重叠</li>
<li>增加了test页的自动点击和图片浏览</li>
</ul>
<h3>2022.11.7</h3>
<ul>
<li>show模式前端发送时没有判断,导致后面show=false的同名字段覆盖了前面的，修好了</li>
</ul>
<h3>2022.11.6</h3>
<ul>
<li>前端增加show模式检测</li>
<li>重命名脚本升级适应新前端</li>
<li>增加了重命名方法-关键词替换</li>
</ul>
<h3>2022.11.5</h3>
<ul>
<li>大标题的info弹窗点开以后只有组件的一部分打上了阴影，解决了，手动重写了一个dialog组件，子组件里没找到全屏的方法，放在最上层的父组件里了，通过函数调用</li>
<li>settings页面里有几个按钮的高度不对，修好了，有一个slot加了padding，顺便跳了setting的style</li>
<li>关键字删除,增加了试错模式,开启后目标将被移动到试错目录下,而不是直接删除</li>
</ul>
<h3>2022.11.4</h3>
<ul>
<li>添加背景图片</li>
<li>添加animate动效</li>
<li>设置页重新布局，使用了一些新技术：组件插槽、动态添加class、ref模板引用</li>
<li>设置页的两个info动效花费了点时间</li>
<li>打包后css中的background-image加载失败，修改了很久打包方法都没能解决；改为手写背景图片，图片重复了10次，不拉到很长看不出来问题</li>
<li>设置info没有显示时偶尔也会遮挡按钮，z-index初始化没有统一，z-index改为动态赋值了</li>
<li>主页的切换效果做了美化</li>
<li>终端switch的图层在log_box上面了，修：终端改成向下拉长了</li>
<li>删除关键字升级到新版接口</li>
</ul>
<h3>2022.11.3</h3>
<ul>
<li>新版的前后端都调通了，现在前后端代码都不用修改，只需要在py_script中添加module就行了，真正做到完全动态读取，前后端0开发负担</li>
<li>目前只给4个模块进行了升级，其他的等用到了再改</li>
</ul>
<h3>2022.11.2</h3>
<ul>
<li>前后端结构再优化，目标是前后端完全自动识别script脚本</li>
<li>后端增加了自动更新目录的功能</li>
</ul>
<h3>2022.10.28</h3>
<ul>
<li>图片分拣微调了一下瀑布流宽度, 之前最大化时候宽度稍大, 第五列换行了</li>
<li>图片分拣改了背景的z-index, 防止挡到：图片分拣的滚动条被div盖住了不能鼠标选中</li>
<li>后端调用终端的if写的不对, 只要有terminal键就调起了终端, 应该是有terminal且为true才, 改了</li>
<li>前端图片压缩增加了尺寸上限输入, 还有视频的</li>
<li>给后端的manager全部增加了赋值的try</li>
<li>所有的中文逗号改成英文逗号了, 不然一直提示挺烦的</li>
</ul>
<h3>2022.10.26</h3>
<ul>
<li>remove三个页面改用v2模板</li>
<li>samu处理改为先删除差异</li>
</ul>
<h3>2022.10.23</h3>
<ul>
<li>发现electron启动后端后如果退出前端应用再启动, 后端端口不能被访问, 而且持续被占用</li>
<li>手动启动的后端改成新建一个终端</li>
<li>copy三个页面都改成v2模板了, 增加了点击背后div时log栏收缩, 便于下次操作</li>
<li>v2模板增加了上中下三个插槽</li>
</ul>
<h3>2022.10.21</h3>
<ul>
<li>完全备份页改用v2模板</li>
</ul>
<h3>2022.10.20</h3>
<ul>
<li>实测打包之后不能使用cookie, 修：使用localStorage替代cookie, 好了</li>
<li>最近电脑变得非常卡, 禁用了windows的开机启动项, 经测试前端的启动按钮是好用的, 以后每次手动打开后端</li>
</ul>
<h3>2022.10.20</h3>
<ul>
<li>因为增加的terminal键在某些页面里不存在所以后端报错了, 修</li>
</ul>
<h3>2022.10.10</h3>
<ul>
<li>prototype增加switch, 前后端增加终端模式, 前端识别到终端模式打卡时, 点击开始按钮下方log框不弹出</li>
<li>改好了：应该增加终端模式, 目前的视频处理过程没办法截获给前端, 终端模式应该单独线程, 保证其他工作可以并行进行</li>
<li>改：samu压缩的log有空看一下, 有几个通病要改一改</li>
</ul>
<h3>2022.10.9</h3>
<ul>
<li>快捷功能入口提供列表动作链</li>
<li>v2原型增加了注解按钮, 目前逻辑还有点问题, 下拉框理论上应该每个选项都能提供不同的注解</li>
<li>之前改的：发现log根本没有写进文件里, 只有logger.write写进去了, 手动给error和warning加了个write</li>
<li>之前改的：反向对比的preset应该先删除文件夹再删除文件, 速度更快</li>
</ul>
<h3>2022.10.7</h3>
<ul>
<li>三端增加了重命名功能, 目前仅支持增删前缀</li>
<li>升级了一版v2的原型页, 现在支持元素混合排列了</li>
</ul>
<h3>2022.10.6</h3>
<ul>
<li>夜夜夜爬虫, 虽然最终成品半自动的方法非常简单, 采用的直接网页截图的方法, 截下来的画质稍微有点差。</li>
<li>网站图片应该是通过一个canvas传递的, 没有找到具体在那个容器里</li>
</ul>
<h3>2022.9.29</h3>
<ul>
<li>home页的快捷入口做好了</li>
<li>prototype模板增加下拉选择</li>
<li>图片压缩时视频被删除了, 删除时没有判断后缀名, 修了, 视频没这个问题, 视频不需要删除, 函数可以直接覆盖</li>
</ul>
<h3>2022.9.27</h3>
<ul>
<li>使用json低代码形式重写了页面, 用拷贝合并页改了一版prototype模板</li>
<li>基本功能全实现了：拷贝（拷贝合并、完全备份、结果检查）、压缩（图片压缩、视频压缩）、删除（删除差异、删除后缀、删除关键字）</li>
<li>[发现logger好像没有输出到文件里]</li>
</ul>
<h3>2022.9.27</h3>
<ul>
<li>后端的buffer最后消息定时发送搞定了, 加了一个timer, 现在发送1~1w计时5s应该不会出现消息阻塞</li>
<li>前端logbox的ui美化了一下, 尺寸拖动条改为全局鼠标松开时触发停止, 另新增了点击开始按钮时box从最小化状态弹出, 添加了最大/最小化按钮</li>
</ul>
<h3>2022.9.23</h3>
<ul>
<li>后端使用threading.Timer嵌套实现定时器功能, 用于消息打包, 效果很好, 后端间隔0.01s发送1-999, 使用0.1s打包, 前端可以看到分组发送的消息, 但每组6~8个不等, 说明程序运行占用时间量级在0.1左右</li>
<li>不对啊, 用 0.1s -&gt; 1s 还是得不到10个一组的效果, 定时器有问题</li>
<li>而且没有设定延时, 一次发送了999个数据, 前端只能显示一次, 尚不清楚是哪里的问题</li>
<li>效果好个卵啊, 捕获系统时间戳之后发现输出全都不对, time.sleep和记录的时间不一致。一旦程序里没有手动用time.sleep()延时, 输出结果就奇怪了, 目前观察到80左右的时候中间插入了一个[1-999]的完整数组, 然后后面照常继续显示</li>
<li>上面输出两次是因为程序里下面那一行没有注释</li>
<li>python的计时是确实有问题, 波动非常大, 循环100x0.01s计时在70~140ms之间, 观察到有一次500ms</li>
<li>如果删除time.sleep(), 自由运行第一次观察到31ms, 后面都是0, 而且前端能log出来, 但box没有显示；box的显示很随机, 有时候能显示, 有时候不行</li>
<li>[决定放弃计时器], python的计时很不稳定, 考虑改用定量打包</li>
<li>实测10个1组打包效果还可以, 后面要考虑一下程序结束时未被塞满的包怎么发送, 初步想法加一个定时器, buffer发送有两种触发条件：1.buffer已满, 2.到达定时</li>
</ul>
<h3>2022.9.21</h3>
<ul>
<li>新前端基本有型了, logbox的样式花了比较多的时间</li>
<li>后面考虑解决一下消息阻塞的问题, 用ws_test发送1-999实测前端显示的消息和后端大概差了5倍(实测5s:1s), 由此知道后端发一个数字大概用时5ms。后端给消息打个包不知道效果咋样</li>
</ul>
<h3>2022.9.20</h3>
<ul>
<li>给sp包写了个入口函数</li>
<li>[发现moviepy有一些类型处理不了, 比如avi和MTS]</li>
<li>[moviepy在程序目录下会生成一个临时视频, 程序如果中断, 临时视频会留下来, 目标位置会有一个半成品视频, 下次运行时会被检查跳过]</li>
</ul>
<h3>2022.9.19</h3>
<ul>
<li>加了一个简单的视频压缩函数</li>
<li>觉得tp的三层模式不好用, 增加功能时候非常受限, 重新写了sp系列的图片压缩和视频压缩（sp:separat）</li>
<li>logger增加了一个write函数, 直接写入log文件</li>
</ul>
<h3>2022.9.18</h3>
<ul>
<li>设置页增加了直接启动后端的功能</li>
<li>这功能一般也用不上就是了</li>
<li>发现反向对比不能正常运行 -&gt; 发现打包后无法指定后端端口</li>
<li>后端端口问题在api_config.js中新增了一套get函数用以动态获取cookie中的port</li>
<li>反向对比报错是utf-8编码问题, 默认open函数打不开log文件报错</li>
<li>顺便给反向对比的快速json增加了删除空文件夹</li>
<li>又发现[瀑布流图片hover按钮显示不正确]</li>
<li>还有昨天发现的[鬼畜震动库的test文字是绝对居中的, 不随滚动条滚动]</li>
</ul>
<h3>2022.9.9</h3>
<ul>
<li>伪瀑布流改为真瀑布流, 删除了初始化加载, 改为直接调用瀑布函数</li>
<li>img标签改为自定义组件, 组件增加了点击mark功能</li>
<li>批量选中并复制功能已经实现, 但复制时偶尔会报错process failed, 是检测函数异步运行导致的, then没有生效, 只能先加100延时了</li>
<li>发现后端的终端模式g了, 修好了, 新装系统之后用python调用, 原程序里是python3</li>
</ul>
<h3>2022.9.8</h3>
<ul>
<li>瀑布流的基本图片展示实现了</li>
<li>for循环的同步运行没能实现, 使用了then和async代码始终都是异步的, 改用定时器实现功能</li>
<li>图片加载的时候非常卡</li>
<li>[超过index之后报错404, 需要加一个判断]</li>
</ul>
<h3>2022.9.4</h3>
<ul>
<li>python把以前的auto_click重新整理了一下</li>
<li>electron的调用有点问题, 截图没法成功</li>
</ul>
<h3>2022.8.29</h3>
<ul>
<li>挪到github了</li>
<li>增加了一个点赞效果的test页</li>
</ul>
<h3>2022.8.28</h3>
<ul>
<li>昨天问题的原因找到了, 因为修改的json在public里面, 属于项目的一部分, serve命令检测文件改动实时刷新了</li>
<li>上面发现了问题还没来得及修, 上面和图标没有加载都是打包的问题, 图标放在包外, 用和调用python脚本一样的路径三元表达式, 图标现在打包后可以正确加载了</li>
<li>左上角名称的正确修改方法是在index.html里</li>
<li>尝试给图片浏览器一个三张图片切换的动画效果, 失败了, 存档在ImgShow_action.vue中, 始终达不到element走马灯的效果</li>
</ul>
<h3>2022.8.28</h3>
<ul>
<li>昨天和前天好像忘了记了</li>
<li>静态资源错误的问题解决了, python单独放在包外</li>
<li>左上角应用名称改过来了</li>
<li>tp批处理拷贝到electron项目里了</li>
<li>新增了自动点击前端的一个简单框架</li>
<li>留了一个问题[点击json写入按钮后页面被强制刷新了]</li>
</ul>
<h3>2022.8.25</h3>
<ul>
<li>图片浏览器增加了底边栏, 显示图片基本信息和当前序号</li>
<li>header增加了隐藏动画</li>
<li>前端的tp批处理整合进去了；引入了element图标；增加了ws通信test, 验证后端是否启动</li>
<li>增加了js调用python</li>
</ul>
<h3>2022.8.24</h3>
<ul>
<li>图片浏览器增加了重命名另存功能</li>
<li>覆写功能暂时不要了</li>
</ul>
<h3>2022.8.23</h3>
<ul>
<li>electron图片浏览器写了个框架, 因为改了文件名导致打包报错, 重建了一遍项目</li>
<li>图片浏览器还没实现剪切功能</li>
</ul>
<h3>2022.8.22</h3>
<ul>
<li>electron hello world</li>
</ul>
<h3>2022.8.17</h3>
<ul>
<li>intf_python 增加了之前tkinter开发搁置的auto_play</li>
</ul>
<h3>2022.8.16</h3>
<ul>
<li>增加了electron hello world</li>
<li>增加了electron + vue 项目 hello world</li>
</ul>
<h3>2022.8.8</h3>
<ul>
<li>tp批处理前后端调通</li>
</ul>
<h3>2022.8.7</h3>
<ul>
<li>修改apply逻辑使其支持列表输入</li>
<li>修改watcher, 计数之后写入logfile</li>
</ul>
<h3>2022.7.27</h3>
<ul>
<li>增加列表ctrl输入可以顺序处理多个指令</li>
<li>增加预置json模板一键调用</li>
<li>usage中fb参数耦合性太高, counter计数之后的总数应该有更好的传参方法</li>
<li>logger：顺序处理多个指令时如果中间间隔时间太长, 每一步指令都会以新的时间创建新的log文件, 但log会同时输出到所有文件</li>
</ul>
<h3>2022.7.21</h3>
<ul>
<li>tp框架下增加handler_formatter.webp_to_jpg, 现在华为云可以识别了</li>
<li>tp框架还引入log_path</li>
</ul>
<h3>2022.7.20</h3>
<ul>
<li>python项目batch弃用, 新建了模板类box_template, 使用finder+handler+watcher组合模式</li>
<li>新的模板命名为tp系列, 意味three parts, 代码分为上述三个部分</li>
</ul>
<h3>2022.6.27</h3>
<ul>
<li>log路径为空时后端报错,  with open(logger.raw_logger.file, "a") as log_file读到的file是空 -&gt; 解决：前端没有把正确的target传过去, 另外后端改了logger的调用方法, copy类里没有相应修改</li>
</ul>
<h3>2022.6.19</h3>
<ul>
<li>增加拷贝方法：反向对比</li>
<li>前端copy页结构再次修改, 可选参数全部整合为json文件</li>
<li>前端增加反向对比</li>
<li>新增tif格式图片直接丢到拷贝列表里了</li>
<li>反向对比时log文件夹应该是例外 -&gt; 增加了判断规则</li>
<li>前端的target没有dir, 加上了</li>
<li>copy函数的log文件开头直接用write方法写入了抬头文本, 不再考虑使用临时修改logger级别的方法了</li>
</ul>
<h3>2022.6.14</h3>
<ul>
<li>图片压缩对bmp报错WARNING: ImgCut - Process failed : 25487 -&gt; 2494, 参考[Remonsan Project]文件夹 - bug没能复现, 不管了</li>
<li>tools: 注释了py_script的log文件输出：/py_script/components/log.py - &gt; - 工具箱logger封装进class, 支持输入log文件路径</li>
<li>前端子组件重组, 增加log文件开关, log文件路径输入</li>
<li>log功能前后端测试通过</li>
</ul>
<h3>2022.6.1</h3>
<ul>
<li>修复：重命名类型没有文件夹, 前端选项忘记添加了</li>
<li>修复：重命名的log没有返回, 后端写的terminal</li>
<li>修复home页ip被跨域, serve时可以通过；使用CORS_ORIGIN_ALLOW_ALL = True允许了所有跨域请求</li>
</ul>
<h3>2022.5.29</h3>
<ul>
<li>新增：设置页切换开发模式4091/生产模式4090端口</li>
<li>新增：拷贝页新增help弹窗</li>
<li>新增：输入框加入预设值, 一键填入, 同时修改了json的格式方便检索</li>
</ul>
<h3>2022.5.26</h3>
<ul>
<li>修复：图片压缩时没有先创建输出目录</li>
<li>home页增加ip显示</li>
</ul>
<h3>2022.5.19</h3>
<ul>
<li>home页的简易终端增加了cd功能</li>
<li>just copy 处理大量文件时django报错：... took too long to shut down and was killed. -&gt; 消息阻塞, 增加终端模式</li>
<li>frontend: showlog: 滚动条自动跳转到最底部时总是会少一行；超过上限100行之后最后一行会显示出来 =&gt; 解决：查阅资料发现滚动条位置控制不能在传参时触发, 要在页面渲染结束后调用, 这也解释了为什么在testbutton里log出来的maxpos和watch里的不一样, 明明什么都没。, 增加了onUpdate方法再次触发一次gotoBottom()</li>
</ul>
<h3>2022.5.6</h3>
<ul>
<li>copy_to_one如果输出目录不存在会报错 - 增加了输出路径创建的步骤</li>
</ul>
<h3>2022.5.3</h3>
<ul>
<li>batch重写的rename中的by_number修好了, 是路径拼接错误的问题</li>
<li>batch重写的rename共4个方法tools都好了</li>
<li>重命名和拷贝前后端重写完成</li>
</ul>
<h3>2022.5.2</h3>
<ul>
<li>前端拷贝页格式和其他两个统一</li>
<li>发现前端拷贝全部时后端没有log返回, 测试发现没问题, 等一会就行了, 数据量太大</li>
<li>用通用batch模板重写了tools的copy方法, 新box_copy_batch, batch加入了对任意后缀名的支持</li>
<li>copy类的三个方法后端用类继承的方法重写了, 现在代码非常简洁, 开心</li>
<li>显示路径按钮暂时还不能用：解决了, 设置logger模式为frontend时无效是因为每个py里面都用LogRepack()生成了新的logger实例, 需要挨个设置模式才行, 改成只在batch里import一次, 其他文件import batch里面的这一个logger</li>
<li>前端log box下部拖动条逻辑优化, 改成一个块了, 结束事件增加绑定鼠标移出, 底部padding设为1000, 底部留有余量时页面高度缩小时滚动条不会自动向上滚动</li>
<li>log box 文本不换行, 横向显示滚动条</li>
<li>log box 重复行的值传不进去, 暂时没想到怎么解决, box的刷新是watch props实现的, props值不变没法刷新</li>
<li>batch增加了一个addpara参数给rename用</li>
</ul>
<h3>2022.5.1</h3>
<ul>
<li>前端重命名增加了输出路径框, 留空时直接操作原文件, 输入时先把文件拷贝到目标路径再操作</li>
<li>后端rename增加了对输出路径的支持, 现在rename前端可以作为一个标准模板</li>
<li>webp2jpg前后端调通</li>
</ul>
<h3>2022.4.29</h3>
<ul>
<li>python增加头部注释, 包括创建时间, 最后修改时间, 状态, 基本介绍</li>
<li>增加general_batch批处理框架, 使用抽象类</li>
<li>为batch类增加了uml类图</li>
<li>增加box_format基本框架, 聚合batch类</li>
<li>format完成格式转换.webp-&gt;.jpg, 实际上直接改后缀名就可以</li>
</ul>
<h3>2022.4.27</h3>
<ul>
<li>python启动dist有问题, 改用npx了</li>
<li>电脑在wsl里配置了端口9001</li>
<li>nginx setup端口和路径少了两个分号</li>
<li>wsl环境nginx启动报错： "/var/run/nginx.pid" failed (2: No such file or directory)</li>
</ul>
<h3>2022.4.24</h3>
<ul>
<li>props传参是单向的, 还是得用provide</li>
<li>现在的python两页扩展性不好, 考虑应该把所有模式写一个json, 包括ws的api和add_para的组件名也都写在json里</li>
<li>重命名写在json里了, 实现了组件的动态加载, 使用了defineAsyncComponent</li>
<li>输入框前面的文本和输入框在同一行显示是用了输入框宽度50%来实现的</li>
<li>批量重命名整合页面完成, 清空按钮还需修改</li>
<li>文件拷贝也仿照做了一个json, 拷贝和重命名两个功能的代码重复太多了</li>
<li>翻出来以前的代码作了比对, 修复问题- logbox的滚动条坏了：问题是el-scrollbar的高度不能设置为100%, 应该是具体的数字, 改成冒号表达式了</li>
<li>增加未来功能的路由, 先占坑</li>
</ul>
<h3>2022.4.23</h3>
<ul>
<li>检查统一shellbox格式user_profile和输入确认：apt,nginx,codeserver,node,python,ssh</li>
<li>树莓派改源没有成功</li>
<li>wsl中部署, backend不能启动, 修正了几个文件名和append的路径</li>
<li>后端run命令还是路径错误, 新增了os.chdir命令切换目录</li>
<li>整合拷贝页面基本功能完成, 附加para还没做, 增加了滚动条, log组件增加padding-bottom, 现在最底部不会显示不到了, 可以无限拉长往下滚动</li>
</ul>
<h3>2022.4.22</h3>
<ul>
<li>新建onebox项目, 从23m缩小到4m</li>
<li>修改一些文件名, init_node路径对应修改</li>
<li>前端合并了三个拷贝功能到一页, 内容还没整完</li>
</ul>
<h3>2022.4.19</h3>
<ul>
<li>启动命令从.bashrc移动到.user_profile</li>
<li>统一格式：init_codeserver, init_ssh</li>
</ul>
<h3>2022.4.16</h3>
<ul>
<li>python前端端口改为8088, 后端改为3080防止冲突</li>
<li>websocket_demo里面没有用config里读的url, 改了</li>
</ul>
<h3>2022.4.14</h3>
<ul>
<li>shellbox在树莓派0里没有完全跑通, 推测是网络问题</li>
<li>samba增加判断apt是否已经安装, 修复conf文件错误, 增加树莓派版本conf文件</li>
<li>smb.conf文件里boolean值参数注释写在后面会报错, 要另起一行写注释</li>
<li>use hash history mode</li>
</ul>
<h3>2022.4.12</h3>
<ul>
<li>shellbox整理, 初始化脚本统一格式</li>
</ul>
<h3>2022.4.11</h3>
<ul>
<li>home页增加简易远程终端</li>
<li>showlog增加鼠标拖动修改框体尺寸功能</li>
</ul>
<h3>2022.4.7</h3>
<ul>
<li>增加空白登录页, 暂不启用路由守卫</li>
<li>test2改名blank, 放到demo里了</li>
</ul>
<h3>2022.4.6</h3>
<ul>
<li>fix: copy_to_one输出目录不用检查是否存在, 不存在会自动创建</li>
</ul>
<h3>2022.4.5</h3>
<ul>
<li>修复termux下python init脚本报错问题, 用pip3不用清华源, 注释了两个问题库</li>
<li>是pip没更新的问题, 更新完pyqt5不报内部错误了, 但exit提示不是pip的问题, 查资料说pyqt5不支持高版本python, 放弃</li>
</ul>
<h3>2022.4.1</h3>
<ul>
<li>ShowLog偶尔报错解决了, 是v-for时候直接用了item作为key, 有重复元素时key就重复了, 改用index就好</li>
<li>Rename报错解决了, 改名为RenameBox, 推测应该是rename关键字冲突, 实际调用的不是我写的Rename, 所以报错输入参数不对</li>
<li>rename增加了文件/文件夹切换选项, 是否打印路径选项</li>
<li>rename_box代码复用精简</li>
<li>前端完成rename2删除括号</li>
<li>前端完成rename3添加前缀</li>
<li>全部备份、压缩备份报错修复, 总大小为0时除数为0报错</li>
</ul>
<h3>2022.3.31</h3>
<ul>
<li>websocket现在可以在asgi.py里添加多个了, 本质就是数组, 直接相加合并就行</li>
<li>项目添加jsconfig.json指定前端文件夹位置, 现在vetur不会莫名报错了</li>
<li>重定义log, copy_to_one完成新log写法替换</li>
<li>copy_to_one前端完成</li>
<li>backup_all前端完成</li>
<li>backup_img_cut前端完成</li>
<li>[rename报错, frontend模式的log也不对]</li>
</ul>
<h3>2022.3.30</h3>
<ul>
<li>增加全局组件：log显示卡片, 并附demo</li>
<li>一键启动前后端脚本</li>
<li>print目前可以截取, 但log不行</li>
<li>拷贝合并页功能基本实现, 目前问题：1.滚动条不能保持在底部 [2.后端代码log改为print]</li>
<li>滚动条功能实现了, ref的原理明天要仔细研究一下, [滚动条离最低部总是差一行]</li>
<li>[重要：后端websocket只能添加一个app, 多个数组报错]</li>
</ul>
<h3>2022.3.28</h3>
<ul>
<li>ubuntu环境一键配置bash脚本</li>
</ul>
<h3>2022.3.27</h3>
<ul>
<li>前后端增加demo分组</li>
</ul>
<h3>2022.3.26</h3>
<ul>
<li>增加两个一键启动脚本</li>
</ul>
<h3>2022.3.24</h3>
<ul>
<li>component和usage文件夹移动到py_script文件夹下, 日后报错记得在这里修改</li>
<li>rename新增方法批量添加前缀</li>
<li>后端websocket在app_test中简单实现, postman通信成功</li>
</ul>
<h3>2022.3.23</h3>
<ul>
<li>前端框架FrameLayout.vue在conmponents里实现, 在App.vue里调用</li>
<li>copy to one 完成前后端通信</li>
</ul>
<h3>2022.3.12</h3>
<ul>
<li>新建crawler类</li>
<li>新建vue前端文件夹frontend</li>
</ul>
<h3>2022.3.6</h3>
<ul>
<li>补充readme</li>
</ul>
<h3>旧的记录</h3>
<ul>
<li>
<p>待办：</p>
<ol>
<li>删除空文件夹</li>
<li>自动删除空日志</li>
<li>视频压缩考虑纵向视频情况, 宽&gt;长</li>
<li>moviepy不能处理wmv, 改成mp4</li>
<li>视频压缩尝试方案1：修改后缀名, 查到avi&gt;mp4</li>
<li>视频压缩尝试方案2：ffmpeg设定总比特率,https://zhuanlan.zhihu.com/p/407554975</li>
</ol>
</li>
<li>
<p>2022.1.2：反向对比删除时要把时间戳文件留下来</p>
</li>
<li>2022.1.2：重写img_kleiner, 复用folder_backup代码</li>
<li>2022.1.2：png尺寸问题解决</li>
<li>2022.1.2：备份加个时间戳</li>
<li>2022.1.1：增加文件总大小的统计, 以及不同类型文件计数+大小统计</li>
<li>2022.1.1：在图片压缩基础上改一版备份所有文件的脚本</li>
<li>2021.12.30：加一个邮件提醒, 程序结束时候调用</li>
<li>2021.12.30：反向检查, 删除多余文件</li>
<li>2021.12.26：moviepy视频尺寸压缩程序完成基本测试, 效果不好</li>
<li>2021.12.26：logger输出修改, 先显示要处理的文件名, 不然复制大文件时程序看起来好像卡死了一样</li>
<li>2021.12.25：pycharm旧代码改用vscode重建项目,上传git</li>
</ul>